$def with (teamMeets,scores,teamScores,finalScores)

<h1>Choose who to swim! (D3 Men Only)</h1>

<script type="text/javascript">
	var dict = new Object();
	$for team in teamMeets:
		dict["$:team"]=[]
		$for meet in teamMeets[team]:
			dict["$:team"].push("$:meet")
	var numTeams=2;		
	function getMeets (form,name) {
		var team = form[name].value;
		var meetList = form['meet' + name.slice(-1)];
		meetList.innerHTML = "";
		meetList.options[0]= new Option("Create Lineup","Create Lineup");
		for (i in dict[team]) {
			var option = document.createElement("option");
			option.text = dict[team][i];
			option.value = dict[team][i];
			meetList.appendChild(option);
		}
	}
	function addTeam (form) {
		numTeams += 1
		var submit = document.getElementById("swim");
		var teams = document.createElement("select");
		var meets = document.createElement("select");

		form.insertBefore(document.createElement("br"),submit);
		form.insertBefore(document.createTextNode("Team: "),submit);
		form.insertBefore(teams,submit);
		form.insertBefore(document.createElement("br"),submit);
		form.insertBefore(document.createTextNode("Meet: "),submit);
		form.insertBefore(meets,submit);
		form.insertBefore(document.createElement("br"),submit);
		
		teams.setAttribute("name","team" + numTeams.toString());
		meets.setAttribute("name","meet" + numTeams.toString());
		teams.setAttribute("onchange","getMeets(this.form,this.name)");
		meets.setAttribute("name","meet" + numTeams.toString());

		var keys=[];
		keys.push("")
		for (var team in dict) {
			keys.push(team);
		}
		keys.sort();
		for (var i in keys) {
			var option = document.createElement("option");
			option.text = keys[i];
			option.value = keys[i];
			teams.appendChild(option);
		}
	}
</script>
$ teams = teamMeets.keys()
$ teams.sort()
<form name=form1 method="GET">
	<button type="button" onclick="addTeam(this.form);">Add New Team</button>
	</br> </br>
	Team: <select type="text" name="team1" onchange="getMeets(this.form,this.name)">
		<option></option>
		$for name in teams:
			<option>$:name</option>
	</select>
	</br>
	Meet: <select type="text" name="meet1"></select>	</br>
	</br>
	Team: <select type="text" name="team2" onchange="getMeets(this.form,this.name)"> 
		<option></option>
		$for name in teams:
			<option>$:name</option>
	</select>
	</br>
	Meet: <select type="text" name="meet2"></select>	</br>
	<input id="swim" type="submit" value="Swimulate">
</form>

<div id="scoreTable">
$if scores:
	$:scores
</div>

<div id="report">
$if teamScores:
	$:teamScores
</div>

<div id="finalScores">
$if finalScores:
	$:finalScores
</div>